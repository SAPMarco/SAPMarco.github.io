/*!
 * OpenUI5
 * (c) Copyright 2009-2020 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/dnd/DragInfo","sap/ui/core/dnd/DropInfo","sap/ui/events/KeyCodes"],function(e,r,t){"use strict";var n="Before",o="insertBefore",i="insertAfter",a,s="IconTabReorder";var g={_insertControl:function(e,r,t){if(e===i){r.insertAfter(t)}else{r.insertBefore(t)}},handleDrop:function(e,r,t,s,d){var f=e.indexOfItem(t),u=e.indexOfItem(s),c=t.$(),p=s.$(),l=0,D=sap.ui.getCore().getConfiguration().getRTL(),I=r===n;if(D&&!d){if(I){l=f<u?u:u+1;a=i}else{l=f<u?u-1:u;a=o}}else{if(I){l=f<u?u-1:u;a=o}else{l=f<u?u:u+1;a=i}}g._insertControl(a,c,p);g._handleConfigurationAfterDragAndDrop.call(e,t,l)},_updateAccessibilityInfo:function(){var e=this.getItems(),r=1,t;e.forEach(function(e){t=e.getDomRef();if(t&&t.getAttribute("aria-posinset")!==null){t.setAttribute("aria-posinset",r++)}})},_handleConfigurationAfterDragAndDrop:function(e,r){this.removeAggregation("items",e,true);this.insertAggregation("items",e,r,true);g._updateAccessibilityInfo.call(this)},_decreaseDropIndex:function(e){if(e===0){a=i;return e}a=o;return e-1},_increaseDropIndex:function(e,r){if(e===r-1){a=o;return e}a=i;return e+1},moveItem:function(e,r){var n=e.$(),s=this.getItems(),d=this.indexOfItem(e),f=sap.ui.getCore().getConfiguration().getRTL(),u,c,p=t;switch(r){case p.HOME:u=0;a=o;break;case p.END:u=s.length-1;a=i;break;case p.ARROW_LEFT:if(f){u=g._increaseDropIndex(d,s.length)}else{u=g._decreaseDropIndex(d)}break;case p.ARROW_RIGHT:if(f){u=g._decreaseDropIndex(d)}else{u=g._increaseDropIndex(d,s.length)}break;case p.ARROW_DOWN:u=g._increaseDropIndex(d,s.length);break;case p.ARROW_UP:u=g._decreaseDropIndex(d);break;default:return}c=s[u].$();g._insertControl(a,n,c);g._handleConfigurationAfterDragAndDrop.call(this,e,u);return true},getDraggedDroppedItemsFromList:function(e,r,t){var n,o,i,a=r.getId(),s=t.getId();if(!e&&!r&&!t){return null}e.forEach(function(e){i=e.getId();if(!i){return}if(i===s){n=e}if(i===a){o=e}});return{oDraggedControlFromList:o,oDroppedControlFromList:n}},setDragDropAggregations:function(t,n){var o=t._oIconTabHeader?t._oIconTabHeader:t;var i=o.getId();t.addDragDropConfig(new e({sourceAggregation:"items",groupName:s+i}));t.addDragDropConfig(new r({targetAggregation:"items",dropPosition:"Between",dropLayout:n,drop:t._handleDragAndDrop.bind(t),groupName:s+i}))}};return g});