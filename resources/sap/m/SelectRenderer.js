/*!
 * OpenUI5
 * (c) Copyright 2009-2020 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Renderer","sap/ui/core/Core","sap/ui/core/ValueStateSupport","sap/ui/core/IconPool","sap/m/library","sap/ui/Device","sap/ui/core/InvisibleText","sap/ui/core/library"],function(e,t,a,i,n,s,r,l){"use strict";var o=l.TextDirection;var d=l.ValueState;var c=n.SelectType;var S={apiVersion:2};S.CSS_CLASS="sapMSlt";S.render=function(e,t){var a=t.getTooltip_AsString(),n=t.getType(),r=t.getAutoAdjustWidth(),l=t.getEditable(),o=t.getEnabled(),g=t.getWidth(),u=g.indexOf("%")>-1,p=r||g==="auto"||u,f=S.CSS_CLASS;e.openStart("div",t);this.addClass(e,t);e.class(f);e.class(f+t.getType());if(!o){e.class(f+"Disabled")}else if(!l){e.class(f+"Readonly")}if(p&&n===c.Default){e.class(f+"MinWidth")}if(r){e.class(f+"AutoAdjustedWidth")}else{e.style("width",g)}if(t.getIcon()){e.class(f+"WithIcon")}if(o&&l&&s.system.desktop){e.class(f+"Hoverable")}e.class(f+"WithArrow");if(t.getValueState()!==d.None){this.addValueStateClasses(e,t)}e.style("max-width",t.getMaxWidth());if(a){e.attr("title",a)}else if(n===c.IconOnly){var I=i.getIconInfo(t.getIcon());if(I){e.attr("title",I.text)}}e.openEnd();this.renderHiddenSelect(e,t);this.renderLabel(e,t);switch(n){case c.Default:this.renderArrow(e,t);break;case c.IconOnly:this.renderIcon(e,t);break}var h=t.getList();if(t._isShadowListRequired()&&h){this.renderShadowList(e,h)}this.renderAccessibilityDomNodes(e,t);e.close("div")};S.renderHiddenSelect=function(e,t){var a=t.getList(),i,n;e.openStart("select",t.getId()+"-hiddenSelect");this.writeAccessibilityState(e,t);if(t._isRequired()){e.attr("required","required")}if(!t.getEnabled()){e.attr("disabled","disabled")}e.attr("name",t.getName());e.attr("value",t.getSelectedKey());e.class("sapUiPseudoInvisibleText");e.class(S.CSS_CLASS+"HiddenSelect");e.openEnd();if(t.getForceSelection()){e.openStart("option");e.attr("hidden",true);e.attr("disabled",true);e.attr("selected",true);e.openEnd();e.close("option")}for(n=0,i=a.getItems();n<i.length;n++){e.openStart("option");e.attr("value",i[n].getText());e.openEnd();e.text(i[n].getText());e.close("option")}e.close("select")};S.renderLabel=function(t,a){var i=a.getSelectedItem(),n=a.getTextDirection(),s=e.getTextAlign(a.getTextAlign(),n),r=S.CSS_CLASS;t.openStart("span",a.getId()+"-label");t.attr("aria-hidden",true);t.class(r+"Label");if(a.getValueState()!==d.None){t.class(r+"LabelState");t.class(r+"Label"+a.getValueState())}if(a.getType()===c.IconOnly){t.class("sapUiPseudoInvisibleText")}if(n!==o.Inherit){t.attr("dir",n.toLowerCase())}t.style("text-align",s);t.openEnd();if(a.getType()!==c.IconOnly){t.renderControl(a._getValueIcon());t.openStart("span",a.getId()+"-labelText");t.class("sapMSelectListItemText");t.openEnd();t.text(i&&i.getParent()?i.getText():null);t.close("span")}t.close("span")};S.renderArrow=function(e,t){var a=S.CSS_CLASS;e.openStart("span",t.getId()+"-arrow");e.attr("aria-hidden",true);e.class(a+"Arrow");if(t.getValueState()!==d.None){e.class(a+"ArrowState")}e.openEnd().close("span")};S.renderIcon=function(e,t){var a=t.getTooltip_AsString();e.icon(t.getIcon(),S.CSS_CLASS+"Icon",{id:t.getId()+"-icon",title:a||null})};S.renderShadowList=function(e,t){var a=t.getRenderer();a.writeOpenListTag(e,t,{elementData:false});this.renderShadowItems(e,t);a.writeCloseListTag(e,t)};S.renderShadowItems=function(e,t){var a=t.getRenderer(),i=t.getItems().length,n=t.getSelectedItem();for(var s=0,r=t.getItems();s<r.length;s++){a.renderItem(e,t,r[s],{selected:n===r[s],setsize:i,posinset:s+1,elementData:false})}};S.addClass=function(e,t){};S.addValueStateClasses=function(e,t){e.class(S.CSS_CLASS+"State");e.class(S.CSS_CLASS+t.getValueState())};S.getAriaRole=function(e){switch(e.getType()){case c.Default:return"listbox";case c.IconOnly:return"button"}};S._getValueStateString=function(e){var t="sap.ui.core";switch(e.getValueState()){case d.Success:return r.getStaticId(t,"VALUE_STATE_SUCCESS");case d.Warning:return r.getStaticId(t,"VALUE_STATE_WARNING");case d.Information:return r.getStaticId(t,"VALUE_STATE_INFORMATION")}return""};S.writeAccessibilityState=function(e,t){var a=this._getValueStateString(t),n=t.getSelectedItem(),s=t.getType()===c.IconOnly,r=t._getValueIcon(),l=[],o=[],S,g,u,p;t.getLabels().forEach(function(e){if(e&&e.getId){l.push(e.getId())}});if(t.isOpen()&&n&&n.getDomRef()){u=n.getId()}if(n&&!n.getText()&&n.getIcon&&n.getIcon()){var f=i.getIconInfo(n.getIcon());if(f){p=f.text||f.name}}if(p&&r){a=r.getId()}if(a){o.push(a);g=t.getValueStateMessageId()+"-sr"}if(l.length){o=o.concat(l)}S={value:o.join(" "),append:true};e.accessibilityState(null,{role:this.getAriaRole(t),roledescription:t._sAriaRoleDescription,readonly:s?undefined:t.getEnabled()&&!t.getEditable(),expanded:t.isOpen(),invalid:t.getValueState()===d.Error?true:undefined,labelledby:s||S.value===""?undefined:S,describedby:g,activedescendant:u,haspopup:"listbox"})};S.renderAccessibilityDomNodes=function(e,i){var n=i.getValueState();if(n===d.None){return}var s=t.getLibraryResourceBundle("sap.m").getText("INPUTBASE_VALUE_STATE_"+n.toUpperCase());e.openStart("div",i.getValueStateMessageId()+"-sr").class("sapUiPseudoInvisibleText").attr("aria-live","assertive").attr("aria-atomic","true").openEnd().text(s+" ").text(i.getValueStateText()||a.getAdditionalText(i)).close("div")};return S},true);