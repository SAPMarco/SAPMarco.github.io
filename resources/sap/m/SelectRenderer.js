/*!
 * OpenUI5
 * (c) Copyright 2009-2020 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Renderer","sap/ui/core/Core","sap/ui/core/ValueStateSupport","sap/ui/core/IconPool","sap/m/library","sap/ui/Device","sap/ui/core/InvisibleText","sap/ui/core/library"],function(e,t,a,i,s,n,r,l){"use strict";var o=l.TextDirection;var d=l.ValueState;var c=s.SelectType;var g={apiVersion:2};g.CSS_CLASS="sapMSlt";g.render=function(e,t){var a=t.getTooltip_AsString(),s=t.getType(),r=t.getAutoAdjustWidth(),l=t.getEditable(),o=t.getEnabled(),S=t.getWidth(),u=S.indexOf("%")>-1,p=r||S==="auto"||u,f=g.CSS_CLASS;e.openStart("div",t);this.addClass(e,t);e.class(f);e.class(f+t.getType());if(!o){e.class(f+"Disabled")}else if(!l){e.class(f+"Readonly")}if(p&&s===c.Default){e.class(f+"MinWidth")}if(r){e.class(f+"AutoAdjustedWidth")}else{e.style("width",S)}if(t.getIcon()){e.class(f+"WithIcon")}if(o&&l&&n.system.desktop){e.class(f+"Hoverable")}e.class(f+"WithArrow");if(t.getValueState()!==d.None){this.addValueStateClasses(e,t)}e.style("max-width",t.getMaxWidth());if(a){e.attr("title",a)}else if(s===c.IconOnly){var I=i.getIconInfo(t.getIcon());if(I){e.attr("title",I.text)}}e.openEnd();this.renderHiddenSelect(e,t);this.renderLabel(e,t);switch(s){case c.Default:this.renderArrow(e,t);break;case c.IconOnly:this.renderIcon(e,t);break}var h=t.getList();if(t._isShadowListRequired()&&h){this.renderShadowList(e,h)}this.renderAccessibilityDomNodes(e,t);e.close("div")};g.renderHiddenSelect=function(e,t){var a=t.getList(),i,s;e.openStart("select",t.getId()+"-hiddenSelect");this.writeAccessibilityState(e,t);if(t.getRequired()){e.attr("required","required")}if(!t.getEnabled()){e.attr("disabled","disabled")}e.attr("name",t.getName());e.attr("value",t.getSelectedKey());e.class("sapUiPseudoInvisibleText");e.class(g.CSS_CLASS+"HiddenSelect");e.openEnd();for(s=0,i=a.getItems();s<i.length;s++){e.openStart("option");e.attr("value",i[s].getText());e.openEnd();e.text(i[s].getText());e.close("option")}e.close("select")};g.renderLabel=function(t,a){var i=a.getSelectedItem(),s=a.getTextDirection(),n=e.getTextAlign(a.getTextAlign(),s),r=g.CSS_CLASS;t.openStart("span",a.getId()+"-label");t.attr("aria-hidden",true);t.class(r+"Label");if(a.getValueState()!==d.None){t.class(r+"LabelState");t.class(r+"Label"+a.getValueState())}if(a.getType()===c.IconOnly){t.class("sapUiPseudoInvisibleText")}if(s!==o.Inherit){t.attr("dir",s.toLowerCase())}t.style("text-align",n);t.openEnd();if(a.getType()!==c.IconOnly){t.renderControl(a._getValueIcon());t.openStart("span",a.getId()+"-labelText");t.class("sapMSelectListItemText");t.openEnd();t.text(i&&i.getParent()?i.getText():null);t.close("span")}t.close("span")};g.renderArrow=function(e,t){var a=g.CSS_CLASS;e.openStart("span",t.getId()+"-arrow");e.attr("aria-hidden",true);e.class(a+"Arrow");if(t.getValueState()!==d.None){e.class(a+"ArrowState")}e.openEnd().close("span")};g.renderIcon=function(e,t){var a=t.getTooltip_AsString();e.icon(t.getIcon(),g.CSS_CLASS+"Icon",{id:t.getId()+"-icon",title:a||null})};g.renderShadowList=function(e,t){var a=t.getRenderer();a.writeOpenListTag(e,t,{elementData:false});this.renderShadowItems(e,t);a.writeCloseListTag(e,t)};g.renderShadowItems=function(e,t){var a=t.getRenderer(),i=t.getItems().length,s=t.getSelectedItem();for(var n=0,r=t.getItems();n<r.length;n++){a.renderItem(e,t,r[n],{selected:s===r[n],setsize:i,posinset:n+1,elementData:false})}};g.addClass=function(e,t){};g.addValueStateClasses=function(e,t){e.class(g.CSS_CLASS+"State");e.class(g.CSS_CLASS+t.getValueState())};g.getAriaRole=function(e){switch(e.getType()){case c.Default:return"listbox";case c.IconOnly:return"button"}};g._getValueStateString=function(e){var t="sap.ui.core";switch(e.getValueState()){case d.Success:return r.getStaticId(t,"VALUE_STATE_SUCCESS");case d.Warning:return r.getStaticId(t,"VALUE_STATE_WARNING");case d.Information:return r.getStaticId(t,"VALUE_STATE_INFORMATION")}return""};g.writeAccessibilityState=function(e,t){var a=this._getValueStateString(t),s=t.getSelectedItem(),n=t.getType()===c.IconOnly,r=t._getValueIcon(),l=[],o=[],g,S,u,p;t.getLabels().forEach(function(e){if(e&&e.getId){l.push(e.getId())}});if(t.isOpen()&&s&&s.getDomRef()){u=s.getId()}if(s&&!s.getText()&&s.getIcon&&s.getIcon()){var f=i.getIconInfo(s.getIcon());if(f){p=f.text||f.name}}if(p&&r){a=r.getId()}if(a){o.push(a);S=t.getValueStateMessageId()+"-sr"}if(l.length){o=o.concat(l)}g={value:o.join(" "),append:true};e.accessibilityState(null,{role:this.getAriaRole(t),roledescription:t._sAriaRoleDescription,readonly:n?undefined:t.getEnabled()&&!t.getEditable(),expanded:t.isOpen(),invalid:t.getValueState()===d.Error?true:undefined,labelledby:n||g.value===""?undefined:g,describedby:S,activedescendant:u,haspopup:"listbox"})};g.renderAccessibilityDomNodes=function(e,i){var s=i.getValueState();if(s===d.None){return}var n=t.getLibraryResourceBundle("sap.m").getText("INPUTBASE_VALUE_STATE_"+s.toUpperCase());e.openStart("div",i.getValueStateMessageId()+"-sr").class("sapUiPseudoInvisibleText").attr("aria-live","assertive").attr("aria-atomic","true").openEnd().text(n+" ").text(i.getValueStateText()||a.getAdditionalText(i)).close("div")};return g},true);