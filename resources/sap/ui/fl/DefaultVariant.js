/*!
 * OpenUI5
 * (c) Copyright 2009-2020 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/fl/Change"],function(e){"use strict";var t=function(){};t.prototype.getDefaultVariantId=function(e){var t=this.getNewestDefaultVariantChangeDeleteTheRest(e);if(t){return t.getContent().defaultVariantName}return""};t.prototype.getNewestDefaultVariantChangeDeleteTheRest=function(e){var t=this.getDefaultVariantChanges(e).sort(function(e,t){var a=new Date(e.getCreation());var n=new Date(t.getCreation());if(isNaN(a.getDate())){return-1}if(isNaN(n.getDate())){return 1}return n-a});var a=t.shift();t.forEach(function(e){e.markForDeletion()});return a};t.prototype.getDefaultVariantChanges=function(e){if(!e||typeof e!=="object"){return[]}return Object.keys(e).map(t).filter(a);function t(t){return e[t]}function a(e){return e.getChangeType()==="defaultVariant"}};t.prototype.updateDefaultVariantId=function(e,t){var a=this.getNewestDefaultVariantChangeDeleteTheRest(e);if(a){var n=a.getContent();n.defaultVariantName=t;a.setContent(n)}return a};t.prototype._createChangeFile=function(t){var a;t.changeType="defaultVariant";a=e.createInitialFileContent(t);a.content.defaultVariantName=t.defaultVariantId;a.layer="USER";return a};t.prototype.createChangeObject=function(t){var a;var n;a=this._createChangeFile(t);n=new e(a);return n};return new t},true);