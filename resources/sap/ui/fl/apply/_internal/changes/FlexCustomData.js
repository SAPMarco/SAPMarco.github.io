/*!
 * OpenUI5
 * (c) Copyright 2009-2020 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/CustomData"],function(){"use strict";var t={};t.appliedChangesCustomDataKey="sap.ui.fl.appliedChanges";t.failedChangesCustomDataKeyJs="sap.ui.fl.failedChanges.js";t.failedChangesCustomDataKeyXml="sap.ui.fl.failedChanges.xml";t.notApplicableChangesCustomDataKey="sap.ui.fl.notApplicableChanges";t.getAppliedCustomDataValue=function(a,e,s){var u=this._getCustomData(a,s,this._getCustomDataKey(e,t.appliedChangesCustomDataKey));return u.customDataValue};t.getParsedRevertDataFromCustomData=function(t,a,e){var s=this.getAppliedCustomDataValue(t,a,e);return s&&JSON.parse(s)};t.hasChangeApplyFinishedCustomData=function(a,e,s){var u=s.getAggregation(a,"customData")||[];var o=[this._getCustomDataKey(e,t.appliedChangesCustomDataKey),this._getCustomDataKey(e,t.failedChangesCustomDataKeyJs),this._getCustomDataKey(e,t.notApplicableChangesCustomDataKey)];return u.some(function(t){var a=s.getProperty(t,"key");if(o.indexOf(a)>-1){return!!s.getProperty(t,"value")}})};t.addAppliedCustomData=function(a,e,s,u){var o;var i=this._getCustomDataKey(e,t.appliedChangesCustomDataKey);if(u){o=JSON.stringify(e.getRevertData())}else{o="true"}this._writeCustomData(a,i,o,s)};t.addFailedCustomData=function(t,a,e,s){var u=this._getCustomDataKey(a,s);this._writeCustomData(t,u,"true",e)};t.destroyAppliedCustomData=function(a,e,s){var u=this._getCustomDataKey(e,t.appliedChangesCustomDataKey);var o=this._getCustomData(a,s,u);if(o.customData){s.destroy(o.customData)}};t.getCustomDataIdentifier=function(a,e,s){if(a){return t.appliedChangesCustomDataKey}if(!e){return t.notApplicableChangesCustomDataKey}if(s){return t.failedChangesCustomDataKeyXml}return t.failedChangesCustomDataKeyJs};t._getCustomDataKey=function(t,a){return a+"."+t.getId()};t._writeCustomData=function(t,a,e,s){var u=this._getCustomData(t,s.modifier,a);if(!u.customData){this._createAndAddCustomDataControl(t,s,a,e)}else{s.modifier.setProperty(u.customData,"value",e)}};t._createAndAddCustomDataControl=function(t,a,e,s){var u=a.modifier;var o=a.view;var i=a.appComponent;var r=u.createControl("sap.ui.core.CustomData",i,o,undefined,undefined,false);u.setProperty(r,"key",e);u.setProperty(r,"value",s);u.insertAggregation(t,"customData",r,0,o);return r};t._getCustomData=function(t,a,e){var s=a.getAggregation(t,"customData")||[];var u={};s.some(function(t){var s=a.getProperty(t,"key");if(s===e){u.customData=t;u.customDataValue=a.getProperty(t,"value");return true}});return u};return t},true);