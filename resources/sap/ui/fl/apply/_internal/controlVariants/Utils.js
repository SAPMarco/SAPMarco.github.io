/*
 * ! OpenUI5
 * (c) Copyright 2009-2020 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/util/includes","sap/ui/core/util/reflection/JsControlTreeModifier","sap/ui/fl/Variant","sap/ui/fl/Utils"],function(e,t,n,a){"use strict";function r(e,t){if(!t){return undefined}if(e.indexOf(t.getId())>-1){return t.getId()}return r(e,t.getParent())}var i={DEFAULT_AUTHOR:"SAP",VARIANT_TECHNICAL_PARAMETER:"sap-ui-fl-control-variant-id",compareVariants:function(e,t){if(e.content.content.title.toLowerCase()<t.content.content.title.toLowerCase()){return-1}else if(e.content.content.title.toLowerCase()>t.content.content.title.toLowerCase()){return 1}return 0},getIndexToSortVariant:function(e,t){var n=e.length;e.some(function(e,a){if(i.compareVariants(t,e)<0){n=a;return true}});return n},createVariant:function(e){var r;var i;var o=e.variantSpecificData.content.variantManagementReference;if(o){var c=t.checkControlId(o,e.model.oAppComponent);if(!c){throw new Error("Generated ID attribute found - to offer flexibility a stable VariantManagement ID is needed to assign the changes to, but for this VariantManagement control the ID was generated by SAPUI5 "+o)}}e.variantSpecificData.content.reference=e.model.sFlexReference;e.variantSpecificData.content.packageName="$TMP";e.variantSpecificData.content.validAppVersions=a.getValidAppVersions(e.appVersion,e.variantSpecificData.developerMode,e.variantSpecificData.scenario);i=n.createInitialFileContent(e.variantSpecificData);r=new n(i);return r},getRelevantVariantManagementControlId:function(e,t){var n={};var a=t.reduce(function(e,t){var a=sap.ui.getCore().byId(t);var r=a.getFor();r.forEach(function(e){n[e]=t});return e.concat(r)},[]);var i=r(a,e);return n[i]}};return i});