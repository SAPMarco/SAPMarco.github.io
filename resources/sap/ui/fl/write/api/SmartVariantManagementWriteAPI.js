/*
 * ! OpenUI5
 * (c) Copyright 2009-2020 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/fl/DefaultVariant","sap/ui/fl/StandardVariant","sap/ui/fl/apply/api/SmartVariantManagementApplyAPI","sap/ui/fl/ChangePersistenceFactory","sap/ui/fl/write/_internal/transport/TransportSelection"],function(e,t,a,r,n){"use strict";var o={add:function(e){var t=a._getStableId(e.control);var n=r.getChangePersistenceForControl(e.control);return n.addChangeForVariant(a._PERSISTENCY_KEY,t,e.changeSpecificData)},save:function(e){var t=a._getStableId(e.control);var n=r.getChangePersistenceForControl(e.control);return n.saveAllChangesForVariant(t)},setDefaultVariantId:function(t){var n;var o;var c=a._getStableId(t.control);var l={};l[a._PERSISTENCY_KEY]=c;var i=r.getChangePersistenceForControl(t.control);n={defaultVariantId:t.defaultVariantId,reference:i.getComponentName(),selector:l,validAppVersions:{creation:i._mComponent.appVersion,from:i._mComponent.appVersion}};var u=a._getChangeMap(t.control);o=e.updateDefaultVariantId(u,t.defaultVariantId);if(o){return o}o=e.createChangeObject(n);var s=o.getId();u[s]=o;return o},setExecuteOnSelect:function(e){var n;var o;var c=a._getStableId(e.control);var l={};l[a._PERSISTENCY_KEY]=c;var i=r.getChangePersistenceForControl(e.control);n={executeOnSelect:e.executeOnSelect,reference:i.getComponentName(),selector:l};var u=a._getChangeMap(e.control);o=t.updateExecuteOnSelect(u,e.executeOnSelect);if(o){return o}o=t.createChangeObject(n);var s=o.getId();u[s]=o;return o},_getTransportSelection:function(){return new n}};return o},true);