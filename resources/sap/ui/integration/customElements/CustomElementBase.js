/*!
* OpenUI5
 * (c) Copyright 2009-2020 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
*/
sap.ui.define(["sap/base/Log","sap/ui/integration/util/Utils","sap/base/strings/hyphenate","sap/base/strings/camelize","sap/ui/integration/thirdparty/customElements","sap/ui/integration/thirdparty/customEvent"],function(t,e,i,n,o,s){"use strict";function r(){if(this.constructor===r){throw new TypeError('Abstract class "CustomElementBase" cannot be instantiated directly.')}return Reflect.construct(HTMLElement,[],this.constructor)}r.prototype=Object.create(HTMLElement.prototype);r.prototype.constructor=r;r.prototype.connectedCallback=function(){this._init();this._upgradeAllProperties();this._oControlInstance.placeAt(this.firstElementChild);this._attachEventListeners()};r.prototype.disconnectedCallback=function(){if(this._oControlInstance){this._oControlInstance.destroy();delete this._oControlInstance}if(this.firstElementChild){this.removeChild(this.firstElementChild)}};r.prototype.attributeChangedCallback=function(t,i,o){this._init();var s=n(t);if(e.isJson(o)){o=JSON.parse(o)}if(this._mAllProperties[s]){this._mAllProperties[s].set(this._oControlInstance,o)}else if(this._mAllAssociations[s]){var a=document.getElementById(o);if(a instanceof r){o=document.getElementById(o)._getControl()}this._mAllAssociations[s].set(this._oControlInstance,o)}};r.prototype._init=function(){if(!this._oControlInstance){this._oControlInstance=new this._ControlClass}if(!this.firstElementChild){var t=document.createElement("div");this.appendChild(t)}};r.prototype._getControl=function(){this._init();return this._oControlInstance};r.prototype._attachEventListeners=function(){Object.keys(this._oMetadata.getEvents()).map(function(t){this._oControlInstance.attachEvent(t,function(e){this.dispatchEvent(new CustomEvent(t,{detail:e,bubbles:true}))},this)}.bind(this))};r.prototype._upgradeAllProperties=function(){this._aAllProperties.forEach(this._upgradeProperty.bind(this))};r.prototype._upgradeProperty=function(t){if(this[t]){var e=this[t];delete this[t];this[t]=e}};r.generateAccessors=function(t,e){e.forEach(function(e){Object.defineProperty(t,e,{get:function(){return this.getAttribute(i(e))},set:function(t){if(typeof t==="object"){t=JSON.stringify(t)}return this.setAttribute(i(e),t)}})})};r.define=function(t,e,i){i=i||[];r.awaitDependencies(i).then(function(){window.customElements.define(t,e)})};r.awaitDependencies=function(t){var e=t.map(function(t){return window.customElements.whenDefined(t)});return Promise.all(e)};r.extend=function(t,e){function n(){return r.apply(this,arguments)}n.prototype=Object.create(r.prototype);n.prototype.constructor=n;var o=n.prototype,s="";o._ControlClass=t;o._oMetadata=t.getMetadata();o._mAllAssociations=o._oMetadata.getAllAssociations();o._mAllProperties=o._oMetadata.getAllProperties();o._aAllProperties=[];if(e&&e.customProperties){o._mAllProperties=Object.assign(o._mAllProperties,e.customProperties)}for(s in o._mAllProperties){if(e&&e.privateProperties&&e.privateProperties.indexOf(s)!==-1){continue}o._aAllProperties.push(s)}for(s in o._mAllAssociations){o._aAllProperties.push(s)}Object.defineProperty(n,"observedAttributes",{get:function(){var t=o._aAllProperties.map(i);return t}});r.generateAccessors(o,o._aAllProperties);return n};return r});