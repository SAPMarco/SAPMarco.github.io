/*!
 * OpenUI5
 * (c) Copyright 2009-2020 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Element","./utils/TableUtils","sap/ui/thirdparty/jquery"],function(t,e,o){"use strict";var n=Object.freeze({Standard:"Standard",Summary:"Summary",GroupHeader:"GroupHeader"});function r(){var t=null;var e=n.Standard;var o=false;var r="";var i=false;var a=false;var l=0;Object.defineProperties(this,{context:{get:function(){return t},set:function(e){t=e||null}},Type:{get:function(){return n}},type:{get:function(){return e},set:function(t){if(!(t in n)){throw Error("Is not a valid type for sap.ui.table.Row: "+t)}e=t}},empty:{get:function(){return this.context==null}},contentHidden:{get:function(){return this.empty?true:o},set:function(t){o=t===true}},title:{get:function(){return this.empty?"":r},set:function(t){r=typeof t==="string"?t:""}},expandable:{get:function(){return this.empty?false:a},set:function(t){a=t===true}},expanded:{get:function(){return this.expandable?i:false},set:function(t){i=t===true}},level:{get:function(){return this.empty?0:l},set:function(t){l=typeof t==="number"?Math.max(1,t||1):1}},reset:{value:function(){t=null;e=n.Standard;o=false;r="";a=false;i=false;l=1}}})}var i=new window.WeakMap;function a(t){if(!i.has(t)){i.set(t,Object.seal(new r))}return i.get(t)}var l=t.extend("sap.ui.table.Row",{metadata:{library:"sap.ui.table",defaultAggregation:"cells",aggregations:{cells:{type:"sap.ui.core.Control",multiple:true,singularName:"cell"},_rowAction:{type:"sap.ui.table.RowAction",multiple:false,visibility:"hidden"},_settings:{type:"sap.ui.table.RowSettings",multiple:false,visibility:"hidden"}}}});l.prototype.init=function(){this.initDomRefs()};l.prototype.exit=function(){this.initDomRefs()};l.prototype.getFocusInfo=function(){var e=this.getTable();return e?e.getFocusInfo():t.prototype.getFocusInfo.apply(this,arguments)};l.prototype.applyFocusInfo=function(e){var o=this.getTable();if(o){o.applyFocusInfo(e)}else{t.prototype.applyFocusInfo.apply(this,arguments)}return this};l.prototype.addStyleClass=function(t){this.getDomRefs(true).row.addClass(t)};l.prototype.removeStyleClass=function(t){this.getDomRefs(true).row.removeClass(t)};l.prototype.initDomRefs=function(){this._mDomRefs={}};l.prototype.getIndex=function(){var t=this.getTable();if(!t){return-1}var e=t.indexOfRow(this);var o=t._getRowCounts();if(o.fixedTop>0&&e<o.fixedTop){return e}if(o.fixedBottom>0&&e>=o.count-o.fixedBottom){var n=t._getTotalRowCount();if(n>=o.count){return n-(o.count-e)}else{return e}}return t._getFirstRenderedRowIndex()+e};l.prototype.getDomRefs=function(t,e){t=t===true;e=e===true;var n=t?"jQuery":"dom";var r=this._mDomRefs;if(!r[n]){var i=this.getTable();var a=function(e){var n=document.getElementById(e);if(n){return t?o(n):n}return null};var l=function(e){if(e){return t?e.parent():e.parentNode}return null};r[n]={};if(i){var s=i.indexOfRow(this);r[n].rowSelector=a(i.getId()+"-rowsel"+s);r[n].rowAction=a(i.getId()+"-rowact"+s)}r[n].rowHeaderPart=l(r[n].rowSelector);r[n].rowFixedPart=a(this.getId()+"-fixed");r[n].rowScrollPart=a(this.getId());r[n].rowActionPart=l(r[n].rowAction);r[n].rowSelectorText=a(this.getId()+"-rowselecttext");if(t){r[n].row=o().add(r[n].rowHeaderPart).add(r[n].rowFixedPart).add(r[n].rowScrollPart).add(r[n].rowActionPart)}}var u=r[n];if(e){return Object.keys(u).map(function(t){return u[t]}).filter(Boolean)}return u};l.prototype._updateSelection=function(){var t=this.getTable();var e=t._getSelectionPlugin().isIndexSelected(this.getIndex());this._setSelected(e);t._getAccExtension().updateSelectionStateOfRow(this)};l.prototype.setRowBindingContext=function(t,o){var n=o.getBindingInfo("rows");var r=n?n.model:undefined;var i=a(this);i.reset();i.context=t;if(i.context){e.Hook.call(o,e.Hook.Keys.Row.UpdateState,i)}this.setBindingContext(i.context,r);this.getDomRefs(true).row.toggleClass("sapUiTableRowHidden",this.isContentHidden());this._updateTableCells(o)};l.prototype.getRowBindingContext=function(){return a(this).context};l.prototype.setBindingContext=function(e,o){return t.prototype.setBindingContext.call(this,e||null,o)};l.prototype._updateTableCells=function(t){var e=this.getCells(),o=this.getIndex(),n=!!t._updateTableCell,r,i,a,l=this.getRowBindingContext();for(var s=0;s<e.length;s++){r=e[s];a=!!r._updateTableCell;i=a||n?r.$().closest("td"):null;if(a){r._updateTableCell(r,l,i,o)}if(n){t._updateTableCell(r,l,i,o)}}};l.prototype.getType=function(){return a(this).type};l.prototype.isGroupHeader=function(){return this.getType()===n.GroupHeader};l.prototype.isSummary=function(){return this.getType()===n.Summary};l.prototype.isGroupSummary=function(){return this.isSummary()&&this.getLevel()>1};l.prototype.isTotalSummary=function(){return this.isSummary()&&this.getLevel()===1};l.prototype.isEmpty=function(){return a(this).empty};l.prototype.isContentHidden=function(){return a(this).contentHidden};l.prototype.getLevel=function(){return a(this).level};l.prototype.getTitle=function(){return a(this).title};l.prototype.isExpandable=function(){return a(this).expandable};l.prototype.isExpanded=function(){return a(this).expanded};l.prototype.destroy=function(){this.removeAllCells();return t.prototype.destroy.apply(this,arguments)};l.prototype.invalidate=function(){return this};l.prototype.getDragGhost=function(){var t=this.getTable();var e=t.getDomRef();var o=this.getDomRefs();var n;var r;var i;var a=t._getSelectionPlugin().getSelectedCount();function l(t){t.removeAttribute("id");t.removeAttribute("data-sap-ui");t.removeAttribute("data-sap-ui-related");var e=t.children.length;for(var o=0;o<e;o++){l(t.children[o])}}function s(t,e){var o=t.cloneNode();var n=t.querySelector("thead").cloneNode(true);var r=t.querySelector("tbody").cloneNode();var i=e.cloneNode(true);r.appendChild(i);o.appendChild(n);o.appendChild(r);return o}n=e.cloneNode();n.classList.add("sapUiTableRowGhost");n.classList.remove("sapUiTableVScr");n.classList.remove("sapUiTableHScr");n.style.width=e.getBoundingClientRect().width+"px";if(o.rowSelector){r=t.getDomRef("sapUiTableRowHdrScr").cloneNode();i=o.rowSelector.cloneNode(true);r.appendChild(i);n.appendChild(r)}if(o.rowFixedPart){r=t.getDomRef("sapUiTableCtrlScrFixed").cloneNode();i=s(t.getDomRef("table-fixed"),o.rowFixedPart);r.appendChild(i);n.appendChild(r)}if(o.rowScrollPart){var u=t.getDomRef("sapUiTableCtrlScr");r=u.cloneNode();i=s(t.getDomRef("table"),o.rowScrollPart);r.appendChild(t.getDomRef("tableCtrlCnt").cloneNode());r.firstChild.appendChild(i);n.appendChild(r)}if(o.rowAction){r=t.getDomRef("sapUiTableRowActionScr").cloneNode();i=o.rowAction.cloneNode(true);r.appendChild(i);n.appendChild(r)}if(a>1){r=document.createElement("div");r.classList.add("sapUiTableRowGhostCount");var p=document.createElement("div");p.textContent=a;r.appendChild(p);n.appendChild(r)}l(n);return n};l.prototype._setSelected=function(t){var o=this.getTable();if(t){this.addStyleClass("sapUiTableRowSel")}else{this.removeStyleClass("sapUiTableRowSel")}if(o){e.dynamicCall(o._getSyncExtension,function(e){e.syncRowSelection(o.indexOfRow(this),t)},this)}};l.prototype._setHovered=function(t){var o=this.getTable();if(t){this.addStyleClass("sapUiTableRowHvr")}else{this.removeStyleClass("sapUiTableRowHvr")}if(o){e.dynamicCall(o._getSyncExtension,function(e){e.syncRowHover(o.indexOfRow(this),t)},this)}};l.prototype.getRowAction=function(){return this.getAggregation("_rowAction")};l.prototype.getTable=function(){var t=this.getParent();return e.isA(t,"sap.ui.table.Table")?t:null};l.prototype.Type=n;return l});