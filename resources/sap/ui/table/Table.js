/*!
 * OpenUI5
 * (c) Copyright 2009-2020 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/Device","sap/ui/core/Control","sap/ui/core/Element","sap/ui/core/IconPool","sap/ui/core/util/PasteHelper","sap/ui/model/ChangeReason","sap/ui/model/Filter","sap/ui/model/Sorter","sap/ui/model/BindingMode","./Column","./Row","./library","./utils/TableUtils","./extensions/ExtensionBase","./extensions/Accessibility","./extensions/Keyboard","./extensions/Pointer","./extensions/Scrolling","./extensions/DragAndDrop","./TableRenderer","./rowmodes/FixedRowMode","./rowmodes/InteractiveRowMode","./rowmodes/AutoRowMode","./plugins/SelectionModelSelection","sap/ui/thirdparty/jquery","sap/base/Log"],function(e,t,i,o,n,r,s,a,l,u,d,h,p,g,c,f,y,m,w,v,b,R,C,_,S,x){"use strict";var T=h.GroupEventType;var A=h.NavigationMode;var P=h.SelectionMode;var I=h.SelectionBehavior;var B=h.SortOrder;var M=h.VisibleRowCountMode;var F=p.Hook.Keys.Table;var D=p.createWeakMapFacade();var E=t.extend("sap.ui.table.Table",{metadata:{library:"sap.ui.table",dnd:true,properties:{width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:"auto"},rowHeight:{type:"int",group:"Appearance",defaultValue:null},columnHeaderHeight:{type:"int",group:"Appearance",defaultValue:null},columnHeaderVisible:{type:"boolean",group:"Appearance",defaultValue:true},visibleRowCount:{type:"int",group:"Appearance",defaultValue:10},firstVisibleRow:{type:"int",group:"Appearance",defaultValue:0},selectionMode:{type:"sap.ui.table.SelectionMode",group:"Behavior",defaultValue:P.MultiToggle},selectionBehavior:{type:"sap.ui.table.SelectionBehavior",group:"Behavior",defaultValue:I.RowSelector},selectedIndex:{type:"int",group:"Appearance",defaultValue:-1,deprecated:true},editable:{type:"boolean",group:"Behavior",defaultValue:true},navigationMode:{type:"sap.ui.table.NavigationMode",group:"Behavior",defaultValue:A.Scrollbar,deprecated:true},threshold:{type:"int",group:"Appearance",defaultValue:100},enableColumnReordering:{type:"boolean",group:"Behavior",defaultValue:true},enableGrouping:{type:"boolean",group:"Behavior",defaultValue:false},showColumnVisibilityMenu:{type:"boolean",group:"Appearance",defaultValue:false},showNoData:{type:"boolean",group:"Appearance",defaultValue:true},visibleRowCountMode:{type:"sap.ui.table.VisibleRowCountMode",group:"Appearance",defaultValue:M.Fixed},minAutoRowCount:{type:"int",group:"Appearance",defaultValue:5},fixedColumnCount:{type:"int",group:"Appearance",defaultValue:0},fixedRowCount:{type:"int",group:"Appearance",defaultValue:0},fixedBottomRowCount:{type:"int",group:"Appearance",defaultValue:0},enableColumnFreeze:{type:"boolean",group:"Behavior",defaultValue:false},enableCellFilter:{type:"boolean",group:"Behavior",defaultValue:false},showOverlay:{type:"boolean",group:"Appearance",defaultValue:false},enableSelectAll:{type:"boolean",group:"Behavior",defaultValue:true},enableCustomFilter:{type:"boolean",group:"Behavior",defaultValue:false},enableBusyIndicator:{type:"boolean",group:"Behavior",defaultValue:false},rowActionCount:{type:"int",group:"Appearance",defaultValue:0},alternateRowColors:{type:"boolean",group:"Appearance",defaultValue:false}},defaultAggregation:"columns",aggregations:{title:{type:"sap.ui.core.Control",altTypes:["string"],multiple:false,deprecated:true},footer:{type:"sap.ui.core.Control",altTypes:["string"],multiple:false},toolbar:{type:"sap.ui.core.Toolbar",multiple:false,deprecated:true},extension:{type:"sap.ui.core.Control",multiple:true,singularName:"extension"},columns:{type:"sap.ui.table.Column",multiple:true,singularName:"column",bindable:"bindable",dnd:{layout:"Horizontal"}},rows:{type:"sap.ui.table.Row",multiple:true,singularName:"row",bindable:"bindable",selector:"#{id}-tableCCnt",dnd:true},rowMode:{type:"sap.ui.core.Element",multiple:false,visibility:"hidden"},creationRow:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"},noData:{type:"sap.ui.core.Control",altTypes:["string"],multiple:false},rowActionTemplate:{type:"sap.ui.table.RowAction",multiple:false},rowSettingsTemplate:{type:"sap.ui.table.RowSettings",multiple:false},contextMenu:{type:"sap.ui.core.IContextMenu",multiple:false},plugins:{type:"sap.ui.table.plugins.SelectionPlugin",multiple:true,singularName:"plugin"},_messageStrip:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"},_hiddenDependents:{type:"sap.ui.core.Element",multiple:true,visibility:"hidden"}},associations:{groupBy:{type:"sap.ui.table.Column",multiple:false},ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}},events:{rowSelectionChange:{parameters:{rowIndex:{type:"int"},rowContext:{type:"object"},rowIndices:{type:"int[]"},selectAll:{type:"boolean"},userInteraction:{type:"boolean"}}},columnSelect:{allowPreventDefault:true,parameters:{column:{type:"sap.ui.table.Column"}}},columnResize:{allowPreventDefault:true,parameters:{column:{type:"sap.ui.table.Column"},width:{type:"sap.ui.core.CSSSize"}}},columnMove:{allowPreventDefault:true,parameters:{column:{type:"sap.ui.table.Column"},newPos:{type:"int"}}},sort:{allowPreventDefault:true,parameters:{column:{type:"sap.ui.table.Column"},sortOrder:{type:"sap.ui.table.SortOrder"},columnAdded:{type:"boolean"}}},filter:{allowPreventDefault:true,parameters:{column:{type:"sap.ui.table.Column"},value:{type:"string"}}},group:{allowPreventDefault:true,parameters:{column:{type:"sap.ui.table.Column"}}},columnVisibility:{allowPreventDefault:true,parameters:{column:{type:"sap.ui.table.Column"},newVisible:{type:"boolean"}}},cellClick:{allowPreventDefault:true,parameters:{cellControl:{type:"sap.ui.core.Control"},cellDomRef:{type:"Object"},rowIndex:{type:"int"},columnIndex:{type:"int"},columnId:{type:"string"},rowBindingContext:{type:"sap.ui.model.Context"}}},cellContextmenu:{allowPreventDefault:true,parameters:{cellControl:{type:"sap.ui.core.Control"},cellDomRef:{type:"Object"},rowIndex:{type:"int"},columnIndex:{type:"int"},columnId:{type:"string"},rowBindingContext:{type:"sap.ui.model.Context"}},deprecated:true},beforeOpenContextMenu:{allowPreventDefault:true,parameters:{rowIndex:{type:"int"},columnIndex:{type:"int"},contextMenu:{type:"sap.ui.core.IContextMenu"}}},columnFreeze:{allowPreventDefault:true,parameters:{column:{type:"sap.ui.table.Column"}}},customFilter:{column:{type:"sap.ui.table.Column"},value:{type:"string"}},firstVisibleRowChanged:{firstVisibleRow:{type:"int"}},busyStateChanged:{busy:{type:"boolean"}},paste:{allowPreventDefault:true,parameters:{data:{type:"string[][]"}}}},designtime:"sap/ui/table/designtime/Table.designtime"}});o.insertFontFaceStyle();E.prototype.init=function(){this.mSkipPropagation={rowActionTemplate:true,rowSettingsTemplate:true};D(this).iCachedBindingLength=0;D(this).iFirstRenderedRowIndex=0;D(this).iComputedFixedColumnCount=null;this._attachExtensions();this._bRtlMode=sap.ui.getCore().getConfiguration().getRTL();this._bRowsBeingBound=false;this._bContextsAvailable=false;this._aRowClones=[];this._bRowAggregationInvalid=true;this._mTimeouts={};this._mAnimationFrames={};this._bHideStandardTooltips=false;this._aRowHeights=[];this._aSortedColumns=[];this._aTableHeaders=[];this._bAllowColumnHeaderTextSelection=false;this._iPendingRequests=0;this._bPendingRequest=false;this._iBindingLength=null;this._bFirstRendering=true;this._nDevicePixelRatio=window.devicePixelRatio;if(sap.ui.getCore().isThemeApplied()){p.readThemeParameters()}this._bInvalid=true};E.prototype.applySettings=function(e,i){if(e){var o=["rowMode","plugins"];var n={};for(var r=0;r<o.length;r++){var s=o[r];if(s in e){n[s]=e[s];delete e[s]}}if(Object.keys(n).length>0){t.prototype.applySettings.call(this,n,i)}}this._initLegacyRowMode();this._initLegacySelectionPlugin();t.prototype.applySettings.call(this,e,i)};E.prototype._attachExtensions=function(){if(this._bExtensionsInitialized){return}g.enrich(this,y);g.enrich(this,m);g.enrich(this,f);g.enrich(this,c);g.enrich(this,w);this._bExtensionsInitialized=true};E.prototype.exit=function(){this.invalidateRowsAggregation();this._detachExtensions();if(this._dataReceivedHandlerId){clearTimeout(this._dataReceivedHandlerId);delete this._dataReceivedHandlerId}this._cleanUpTimers();this._detachEvents();p.Menu.cleanupDefaultContentCellContextMenu(this);delete this._aTableHeaders};E.prototype._detachExtensions=function(){g.cleanup(this)};E.prototype.onpaste=function(e){if(e.isMarked()||/^(input|textarea)$/i.test(e.target.tagName)||!this.getDomRef("sapUiTableCnt").contains(e.target)){return}var t=n.getPastedDataAs2DArray(e.originalEvent);if(t.length===0||t[0].length===0){return}this.firePaste({data:t})};E.prototype.onThemeChanged=function(){p.readThemeParameters();if(this.getDomRef()){this.invalidate()}};E.prototype.onlocalizationChanged=function(e){var t=e.changes||{};var i=t.hasOwnProperty("rtl");var o=t.hasOwnProperty("language");this._adaptLocalization(i,o).then(function(){this.invalidate()}.bind(this))};E.prototype._adaptLocalization=function(e,t){if(!e&&!t){return Promise.reject()}var i=Promise.resolve();if(e){this._bRtlMode=sap.ui.getCore().getConfiguration().getRTL()}if(t){i=p.getResourceBundle({async:true,reload:true})}return i.then(function(){if(t){p.Menu.cleanupDefaultContentCellContextMenu(this);this._invalidateColumnMenus()}}.bind(this))};E.prototype._collectRowHeights=function(t){var i=this.getDomRef();if(!i){return[]}var o=this._getBaseRowHeight();var n=t?".sapUiTableColHdrTr":".sapUiTableTr";var r=i.querySelectorAll(".sapUiTableCtrlFixed > tbody > tr"+n);var s=i.querySelectorAll(".sapUiTableCtrlScroll > tbody > tr"+n);var a=t?p.getHeaderRowCount(this):this.getRows().length;var l=[];var u=e.browser.chrome&&window.devicePixelRatio!=1;if(t){if(this.getColumnHeaderHeight()>0){o=this.getColumnHeaderHeight()}else if(this.getRowMode()){o=this._getDefaultRowHeight()}}for(var d=0;d<a;d++){var h=r[d]?r[d].getBoundingClientRect().height:0;var g=s[d]?s[d].getBoundingClientRect().height:0;var c=Math.max(h,g);if(u){var f=o-c;if(f>0&&f<1){l.push(Math.max(c,o-1));continue}}l.push(Math.max(c,o))}if(l.length>0&&!t){p.dynamicCall(this._getSyncExtension,function(e){var t=e.syncRowHeights(l.slice());if(t&&t.length===l.length){l=t.slice()}})}return l};E.prototype._resetRowHeights=function(){var e=this._getBaseRowHeight();var t="";if(e){t=e+"px"}var i=this.getDomRef("tableCCnt");if(i){var o=i.querySelectorAll(".sapUiTableTr");for(var n=0;n<o.length;n++){o[n].style.height=t}}};E.prototype._resetColumnHeaderHeights=function(){var e=this.getDomRef();if(e){var t=e.querySelectorAll(".sapUiTableColHdrTr");for(var i=0;i<t.length;i++){t[i].style.height=null}}};E.prototype._collectTableSizes=function(){var e={tableCtrlScrollWidth:0,tableRowHdrScrWidth:0,tableCtrlScrWidth:0,tableCtrlFixedWidth:0,tableCntHeight:0,tableCntWidth:0};var t=this.getDomRef();if(!t){return e}var i=t.querySelector(".sapUiTableCnt");if(i){e.tableCntHeight=i.clientHeight;e.tableCntWidth=i.clientWidth}var o=t.querySelector(".sapUiTableCtrlScroll:not(.sapUiTableCHT)");if(o){e.tableCtrlScrollWidth=o.clientWidth}var n=t.querySelector(".sapUiTableRowHdrScr");if(n){e.tableRowHdrScrWidth=n.clientWidth}var r=t.querySelector(".sapUiTableCtrlScr:not(.sapUiTableCHA)");if(r){e.tableCtrlScrWidth=r.clientWidth}var s=t.querySelector(".sapUiTableCtrlScrFixed:not(.sapUiTableCHA) > .sapUiTableCtrlFixed");if(s){e.tableCtrlFixedWidth=s.clientWidth}var a=this._getSpanBasedComputedFixedColumnCount();var l=0;if(a){var u=this.getColumns();var d=t.querySelectorAll(".sapUiTableCtrlFirstCol:not(.sapUiTableCHTHR) > th");for(var h=0;h<d.length;h++){var g=parseInt(d[h].getAttribute("data-sap-ui-headcolindex"));if(!isNaN(g)&&g<a){var c=u[g];var f;if(c._iFixWidth!=null){f=c._iFixWidth}else{f=d[h].getBoundingClientRect().width}l+=f}}}if(l>0){var y=this._getScrollExtension();var m=e.tableRowHdrScrWidth;var w=y.getVerticalScrollbar();if(w&&!y.isVerticalScrollbarExternal()){m+=w.offsetWidth}if(p.hasRowActions(this)){var v=this.getDomRef("sapUiTableRowActionScr");if(v){m+=v.offsetWidth}}m+=p.Column.getMinColumnWidth();var b=e.tableCntWidth-m;var R=b>l;var C=!R;if(this._bIgnoreFixedColumnCount!==C){this._bIgnoreFixedColumnCount=C;if(this.getEnableColumnFreeze()){this._invalidateColumnMenus()}this.invalidate()}}return e};E.prototype._updateRowHeights=function(e,t){var i=this.getDomRef();if(!i){return}function o(t,i){var o=e[i];if(o){t.style.height=o+"px"}}var n=t?".sapUiTableColHdrTr":".sapUiTableTr";var r=t?[]:i.querySelectorAll(".sapUiTableRowSelectionCell");var s=t?[]:i.querySelectorAll(".sapUiTableRowActionCell");var a=i.querySelectorAll(".sapUiTableCtrlFixed > tbody > tr"+n);var l=i.querySelectorAll(".sapUiTableCtrlScroll > tbody > tr"+n);Array.prototype.forEach.call(r,o);Array.prototype.forEach.call(s,o);Array.prototype.forEach.call(a,o);Array.prototype.forEach.call(l,o)};E.prototype.onBeforeRendering=function(e){this._bInvalid=true;this._detachEvents();if(e&&e.isMarked("renderRows")){return}this._cleanUpTimers();this.getBinding("rows");this._aTableHeaders=[]};E.prototype.onAfterRendering=function(e){var t=e&&e.isMarked("renderRows");this._bInvalid=false;this._attachEvents();this._initRowDomRefs();if(!this._bAllowColumnHeaderTextSelection&&!t){this._disableTextSelection(this.$().find(".sapUiTableCtrlScrFixed"));this._disableTextSelection(this.$().find(".sapUiTableCtrlScr"))}this.getDomRef().classList.remove("sapUiTableRActFlexible");if(!t){this._aTableHeaders=this.$().find(".sapUiTableColHdrCnt th")}this._updateTableSizes(p.RowsUpdateReason.Render,true);p.registerResizeHandler(this,"Table",this._onTableResize.bind(this));this._bFirstRendering=false};E.prototype.invalidate=function(){this._bInvalid=true;p.Column.invalidateColumnUtils(this);return t.prototype.invalidate.call(this)};E.prototype._initRowDomRefs=function(){var e=this.getRows();for(var t=0;t<e.length;t++){e[t].initDomRefs()}};E.prototype._updateTableSizes=function(e,t){t=t===true;var i=this.getDomRef();if(this._bInvalid||!i||!sap.ui.getCore().isThemeApplied()||i.offsetWidth===0){return}if(!t){this._resetRowHeights();this._resetColumnHeaderHeights()}this._aRowHeights=this._collectRowHeights(false);var o=this._collectRowHeights(true);function n(e){var t=e.getDomRef();var i=p.Column.getMinColumnWidth();var o=[];var n=e.getColumnHeaderVisible();function r(e,t){if(e<=t){return Math.max(e,t-5,i)+"px"}return-1}function s(s){var a=Math.max(s._minWidth||0,i,s.getMinWidth());var l=s.getWidth();var u;var d;var h;if(p.isVariableWidth(l)&&!p.isFixedColumn(e,s.getIndex())){u=t.querySelectorAll('th[data-sap-ui-colid="'+s.getId()+'"]');d=u[n?0:1];h=d?d.offsetWidth:null;if(h!==null){if(h<=a){return{headers:u,newWidth:r(h,a)}}else if(d&&d.style.width!=l){o.push({col:s,header:d,minWidth:a,headers:u});return{headers:u,newWidth:l}}o.push({col:s,header:d,minWidth:a,headers:u})}}return null}function a(e){if(e){Array.prototype.forEach.call(e.headers,function(t){t.style.width=e.newWidth})}}e._getVisibleColumns().map(s).forEach(a);if(o.length){var l;for(var u=0;u<o.length;u++){l=o[u].header&&o[u].header.offsetWidth;o[u].newWidth=r(l,o[u].minWidth);if(parseInt(o[u].newWidth)>=0){a(o[u])}}}}n(this);var r=this._collectTableSizes();this._updateRowHeights(this._aRowHeights,false);this._updateRowHeights(o,true);p.dynamicCall(this._getSyncExtension,function(e){e.syncLayout({top:this.getDomRef("sapUiTableCnt").offsetTop,headerHeight:this.getDomRef().querySelector(".sapUiTableColHdrCnt").getBoundingClientRect().height,contentHeight:this.getDomRef("tableCCnt").getBoundingClientRect().height})},this);var s=this._getScrollExtension();s.updateHorizontalScrollbar(r);s.updateVerticalScrollbarPosition();s.updateVerticalScrollbarVisibility();var a=this.$();if(p.hasRowActions(this)||p.hasRowNavigationIndicators(this)){var l=a.hasClass("sapUiTableRActFlexible");var u=this.getDomRef("dummycolhdr");if(u){var d=this.getDomRef("header");var h=d.clientWidth;var g=this.getColumns().reduce(function(e,t){if(t.getDomRef()&&t.getIndex()>=this.getComputedFixedColumnCount()){return e+p.convertCSSSizeToPixel(t.getWidth())}return e}.bind(this),0);var c=h>g;if(!l&&c){var f=g+r.tableRowHdrScrWidth+r.tableCtrlFixedWidth;var y={};if(!p.hasRowActions(this)){f=f-p.ThemeParameters.navIndicatorWidth+p.BaseBorderWidth}y[this._bRtlMode?"right":"left"]=f;this.$("sapUiTableRowActionScr").css(y);this.$("rowacthdr").css(y);a.toggleClass("sapUiTableRActFlexible",true)}else if(l&&!c){this.$("sapUiTableRowActionScr").removeAttr("style");this.$("rowacthdr").removeAttr("style");a.toggleClass("sapUiTableRActFlexible",false)}}}a.find(".sapUiTableNoOpacity").addBack().removeClass("sapUiTableNoOpacity");p.Hook.call(this,F.UpdateSizes,e)};E.prototype.setShowOverlay=function(e){e=!!e;this.setProperty("showOverlay",e,true);if(this.getDomRef()){var t=document.activeElement;this.$().toggleClass("sapUiTableOverlay",e);this._getAccExtension().updateAriaStateForOverlayAndNoData();this._getKeyboardExtension().updateNoDataAndOverlayFocus(t)}return this};E.prototype._updateFixedBottomRows=function(){var e=this.getDomRef();if(!e||this._getRowCounts().fixedBottom===0){return}var t=p.getFirstFixedBottomRowIndex(this);var i=this.getRows();var o;S(e).find(".sapUiTableRowLastScrollable").removeClass("sapUiTableRowLastScrollable");S(e).find(".sapUiTableRowFirstFixedBottom").removeClass("sapUiTableRowFirstFixedBottom");if(t>=0&&t<i.length){o=i[t].getDomRefs(true);o.row.addClass("sapUiTableRowFirstFixedBottom",true)}if(t>=1&&t<i.length){o=i[t-1].getDomRefs(true);o.row.addClass("sapUiTableRowLastScrollable",true)}};E.prototype.getFocusInfo=function(){var e=this.$().find(":focus").attr("id");if(e){return{customId:e}}else{return i.prototype.getFocusInfo.apply(this,arguments)}};E.prototype.applyFocusInfo=function(e){if(e&&e.customId){S(document.getElementById(e.customId)).trigger("focus")}else{i.prototype.applyFocusInfo.apply(this,arguments)}return this};E.prototype.setTitle=function(e){var t=e;if(typeof e==="string"||e instanceof String){t=h.TableHelper.createTextView({text:e});t.addStyleClass("sapUiTableHdrTitle")}this.setAggregation("title",t);return this};E.prototype.setFooter=function(e){var t=e;if(typeof e==="string"||e instanceof String){t=h.TableHelper.createTextView({text:e})}this.setAggregation("footer",t);return this};E.prototype.setSelectionMode=function(e){if(e===P.Multi){e=P.MultiToggle;x.warning("The selection mode 'Multi' is deprecated and must not be used anymore."+" Your setting was defaulted to selection mode 'MultiToggle'",this)}if(this._hasSelectionPlugin()){x.error("If a selection plugin is applied to the table, the selection mode is controlled by the plugin.",this)}else{this.setProperty("selectionMode",e);this._oLegacySelectionPlugin.setSelectionMode(e)}return this};E.prototype.setFirstVisibleRow=function(e){this._setFirstVisibleRowIndex(e);return this};E.prototype._setFirstVisibleRowIndex=function(e,t){t=Object.assign({onScroll:false,suppressScrolling:false,suppressEvent:false,forceEvent:false,suppressRendering:false,onlySetProperty:false},t);if(e<0){x.error("The index of the first visible row must be greater than or equal to 0. The value has been set to 0.",this);e=0}if(this._bContextsAvailable){var i=this._getMaxFirstVisibleRowIndex();if(i<e){if(!t.onScroll){x.warning("The index of the first visible row must be lesser or equal than the scrollable row count minus the visible row count."+" The value has been set to "+i+".",this)}e=i}}var o=this.getFirstVisibleRow()!=e;var n=this._getFirstRenderedRowIndex();var r=this.getBinding("rows")?Math.min(e,this._getMaxFirstRenderedRowIndex()):e;var s=this._getScrollExtension();this.setProperty("firstVisibleRow",e,true);if(!t.suppressRendering){D(this).iFirstRenderedRowIndex=r}if(t.onlySetProperty){return false}if((o||t.forceEvent)&&!t.suppressEvent){this.fireFirstVisibleRowChanged({firstVisibleRow:e})}if(!this.getBinding("rows")){s.updateVerticalScrollPosition();return false}var a=false;var l=this.getBinding("rows")!=null&&r!==n;if(l){if(!t.suppressRendering){z(this,t.onScroll?p.RowsUpdateReason.VerticalScroll:p.RowsUpdateReason.FirstVisibleRowChange);a=true}if(!t.onScroll&&!t.suppressScrolling){s.updateVerticalScrollPosition(a)}}else if(!t.onScroll&&!t.suppressScrolling){s.updateVerticalScrollPosition(!this._bContextsAvailable)}return a};E.getMetadata().getAggregation("rows")._doesNotRequireFactory=true;E.prototype.bindAggregation=function(e,i){if(e==="rows"){this._bindRows(H(Array.prototype.slice.call(arguments,1)));return this}return t.prototype.bindAggregation.apply(this,arguments)};E.prototype.bindRows=function(e){this._bindRows(H(arguments));return this};E.prototype._bindRows=function(e){V(this);this._bRowsBeingBound=true;W(this);E._addBindingListener(e,"change",function(){this._onBindingChange.apply(this,arguments)}.bind(this));E._addBindingListener(e,"dataRequested",function(){this._onBindingDataRequested.apply(this,arguments)}.bind(this));E._addBindingListener(e,"dataReceived",function(){this._onBindingDataReceived.apply(this,arguments)}.bind(this));if(this.getEnableBusyIndicator()){this.setBusy(false)}p.Hook.call(this,F.BindRows,e);t.prototype.bindAggregation.call(this,"rows",e);this._bRowsBeingBound=false};E.prototype._bindAggregation=function(e,i){if(e==="rows"){V(this);this._bRowsBeingBound=true}t.prototype._bindAggregation.call(this,e,i);if(e==="rows"){var o=this.getBinding("rows");var n=o?o.getModel():null;this._bRowsBeingBound=false;p.Hook.call(this,F.RowsBound,o);if(n&&n.getDefaultBindingMode()===l.OneTime){x.error('The binding mode of the model is set to "OneTime".'+' This binding mode is not supported for the "rows" aggregation!'+" Scrolling can not be performed.",this)}}};E.prototype.unbindAggregation=function(e,i){if(e==="rows"){this._unbindRows();return this}return t.prototype.unbindAggregation.apply(this,arguments)};E.prototype.unbindRows=function(){this._unbindRows();return this};E.prototype._unbindRows=function(){var e=this.getBindingInfo("rows");if(e){p.Hook.call(this,F.UnbindRows,e)}t.prototype.unbindAggregation.call(this,"rows",true);if(this._bRowsBeingBound||this.bIsDestroyed||this._bIsBeingDestroyed){return}this._adjustToTotalRowCount();if(e){p.Hook.call(this,F.RowsUnbound)}V(this)};function V(e){e._bRowsBeingBound=false;e._bContextsAvailable=false;e._iPendingRequests=0;e._bPendingRequest=false;e._iBindingLength=null}function H(e){var t;if(e==null||e[0]==null){t={}}else if(typeof e[0]==="string"){var i=e[0];var o=e[1];var n=e[2];var r=e[3];if(o instanceof a||Array.isArray(n)&&n[0]instanceof s){r=n;n=o;o=undefined}t={path:i,sorter:n,filters:r,template:o}}else{t=e[0]}return t}E._addBindingListener=function(e,t,i,o){if(!e.events){e.events={}}var n=e.events[t];e.events[t]=function(){i.apply(o,arguments);if(n){n.apply(this,arguments)}}};E.prototype._onBindingChange=function(e){var t=e.getParameter("reason");if(t===r.Sort||t===r.Filter){this.setFirstVisibleRow(0)}};E.prototype.setRowMode=function(e){this._destroyLegacyRowMode();this.setAggregation("rowMode",e);this._initLegacyRowMode()};E.prototype.getRowMode=function(){return this.getAggregation("rowMode")};E.prototype._getRowMode=function(){var e=this.getRowMode()||this._oLegacyRowMode;if(!e){this._initLegacyRowMode();e=this._oLegacyRowMode}return e};E.prototype._initLegacyRowMode=function(){if(this._oLegacyRowMode||this.getRowMode()){return}this._oLegacyRowMode=U(this);this.addAggregation("_hiddenDependents",this._oLegacyRowMode)};E.prototype._destroyLegacyRowMode=function(){if(this._oLegacyRowMode){this._oLegacyRowMode.destroy();delete this._oLegacyRowMode}};function U(e){var t;switch(e.getVisibleRowCountMode()){case M.Fixed:t=new b(true);break;case M.Interactive:t=new R(true);break;case M.Auto:t=new C(true);break;default:}return t}E.prototype._getRowCounts=function(){var e=this._getRowMode().getComputedRowCounts();var t=this._bVariableRowHeightEnabled&&!e.fixedTop&&!e.fixedBottom;e._fullsize=e.count;e._scrollSize=e.scrollable;if(e.count>0&&t){e.count++;e.scrollable++}return e};E.prototype.setVisibleRowCountMode=function(e){if(this.getRowMode()){x.warning('If the "rowMode" aggregation is set, setting the "visibleRowCountMode" has no effect');return this.setProperty("visibleRowCountMode",e,true)}var t=this.getVisibleRowCountMode();this.setProperty("visibleRowCountMode",e);var i=this.getVisibleRowCountMode();if(i!==t){this._destroyLegacyRowMode();this._initLegacyRowMode()}return this};E.prototype.setVisibleRowCount=function(e){var t=this.getVisibleRowCountMode();if(t==M.Auto){x.error("VisibleRowCount will be ignored since VisibleRowCountMode is set to Auto",this);return this}if(e!=null&&!isFinite(e)){return this}var i=this.getFixedRowCount()+this.getFixedBottomRowCount();if(e<=i&&i>0){x.error("Table: "+this.getId()+" visibleRowCount('"+e+"') must be bigger than number of"+" fixed rows('"+(this.getFixedRowCount()+this.getFixedBottomRowCount())+"')",this);return this}if(this.getRowMode()){x.warning('If the "rowMode" aggregation is set, setting the "visibleRowCount" has no effect');return this.setProperty("visibleRowCount",e,true)}e=this.validateProperty("visibleRowCount",e);if(this.getBinding("rows")&&this._getTotalRowCount()<=e){this.setFirstVisibleRow(0)}this.setProperty("visibleRowCount",e);p.dynamicCall(this._getSyncExtension,function(t){t.syncRowCount(e)});return this};E.prototype.setMinAutoRowCount=function(e){if(parseInt(e)<1){x.error("The minAutoRowCount property must be greater than 0. The value has been set to 1.",this);e=1}if(this.getRowMode()){x.warning('If the "rowMode" aggregation is set, setting the "minAutoRowCount" has no effect');return this.setProperty("minAutoRowCount",e,true)}return this.setProperty("minAutoRowCount",e)};E.prototype.setTooltip=function(e){x.warning("The aggregation tooltip is not supported for sap.ui.table.Table",this);return this.setAggregation("tooltip",e,true)};E.prototype.setNavigationMode=function(){this.setProperty("navigationMode",A.Scrollbar,true);x.error("The navigationMode property is deprecated and must not be used anymore. Your setting was defaulted to 'Scrollbar'",this);return this};E.prototype._getFixedBottomRowContexts=function(){var e=this._getRowCounts();var t=this._getTotalRowCount();if(e.fixedBottom>0&&e.count-e.fixedBottom<t){return this._getContexts(t-e.fixedBottom,e.fixedBottom)}else{return[]}};E.prototype._getFixedRowContexts=function(){var e=this._getRowCounts();if(e.fixedTop>0){return this._getContexts(0,e.fixedTop)}else{return[]}};E.prototype._getContexts=function(e,t,i){var o=this.getBinding("rows");if(o){return o.getContexts(e,t,i)}else{return[]}};E.prototype._getRowContexts=function(e,t,i){var o=this.getBinding("rows");var n=this.getRows().length;e=e==null?n:e;e=Math.max(e,this._getRowMode().getMinRequestLength());if(!o||e<=0){return[]}t=t===true;i=i===true;var r=this._getFirstRenderedRowIndex();var s=this._getRowCounts();var a=[];var l;var u=e-s.fixedBottom;var d=0;var h=u;var p=this.getThreshold();p=p?Math.max(n,p):0;var g=r;var c=function(e,t,i){for(var o=0;o<t.length;o++){e[i+o]=t[o]}};if(s.fixedTop>0&&r>0){g=r+s.fixedTop;u-=s.fixedTop;d=s.fixedTop;l=this._getFixedRowContexts();a=a.concat(l)}l=this._getContexts(g,u,p);if(!t){this._adjustToTotalRowCount()}var f=this._getTotalRowCount();c(a,l,d);h=Math.min(h,Math.max(f-s.fixedBottom,0));if(s.fixedBottom>0){l=this._getFixedBottomRowContexts();c(a,l,h)}var y=this._getMaxFirstRenderedRowIndex();if(y<r&&this._bContextsAvailable&&!i){this._setFirstVisibleRowIndex(this.getFirstVisibleRow(),{onlySetProperty:true});a=this._getRowContexts(e,t,true)}return a};E.prototype._adjustToTotalRowCount=function(){var e=this.getBinding("rows");var t=this._getTotalRowCount();var i=this._getScrollExtension();if(this._iBindingLength!==t){this._iBindingLength=t;this._updateFixedBottomRows();this._getAccExtension()._updateAriaRowCount();i.adjustToTotalRowCount();if(!e||!p.hasPendingRequests(this)){this._updateNoData()}}};E.prototype.refreshRows=function(e){this._bContextsAvailable=false;if(e===r.Sort||e===r.Filter){this.setFirstVisibleRow(0)}p.Hook.call(this,F.RefreshRows,e||p.RowsUpdateReason.Unknown)};E.prototype.updateRows=function(e,t){if(this.bIsDestroyed||this._bIsBeingDestroyed){return}if(t.detailedReason==="AddVirtualContext"){L(this);return}else if(t.detailedReason==="RemoveVirtualContext"){W(this);return}this._bContextsAvailable=true;z(this,e)};function L(e){var t=e._getRowContexts(null,true)[0];W(e);e._oVirtualRow=e._getRowClone("virtual");e._oVirtualRow.setBindingContext(t,e.getBindingInfo("rows").model);e.addAggregation("_hiddenDependents",e._oVirtualRow)}function W(e){if(e._oVirtualRow){e._oVirtualRow.destroy();delete e._oVirtualRow}}function z(e,t){if(e._bContextsAvailable){p.Hook.call(e,F.UpdateRows,t||p.RowsUpdateReason.Unknown)}}E.prototype.insertRow=function(){x.error('The control manages the rows aggregation. The method "insertRow" cannot be used programmatically!',this);return this};E.prototype.addRow=function(){x.error('The control manages the rows aggregation. The method "addRow" cannot be used programmatically!',this);return this};E.prototype.removeRow=function(){x.error('The control manages the rows aggregation. The method "removeRow" cannot be used programmatically!',this);return null};E.prototype.removeAllRows=function(){x.error('The control manages the rows aggregation. The method "removeAllRows" cannot be used programmatically!',this);return[]};E.prototype.destroyRows=function(){x.error('The control manages the rows aggregation. The method "destroyRows" cannot be used programmatically!',this);return this};E.prototype.setCreationRow=function(e){if(!p.isA(e,"sap.ui.table.CreationRow")){e=null}return this.setAggregation("creationRow",e)};E.prototype.getCreationRow=function(){return this.getAggregation("creationRow")};E.prototype.autoResizeColumn=function(e){this._getPointerExtension().doAutoResizeColumn(e)};E.prototype._attachEvents=function(){var t=this.$();if(sap.ui.getCore().getConfiguration().getAnimation()){S(document.body).on("webkitTransitionEnd transitionend",function(e){if(S(e.target).has(t).length>0){this._updateTableSizes(p.RowsUpdateReason.Animation)}}.bind(this))}e.resize.attachHandler(this._onWindowResize,this);g.attachEvents(this)};E.prototype._detachEvents=function(){S(document.body).off("webkitTransitionEnd transitionend");p.deregisterResizeHandler(this,"Table");e.resize.detachHandler(this._onWindowResize,this);g.detachEvents(this)};E.prototype._cleanUpTimers=function(){var e;for(e in this._mTimeouts){if(this._mTimeouts[e]){window.clearTimeout(this._mTimeouts[e]);delete this._mTimeouts[e]}}for(e in this._mAnimationFrames){if(this._mAnimationFrames[e]){window.cancelAnimationFrame(this._mAnimationFrames[e]);delete this._mAnimationFrames[e]}}};E.prototype._updateNoData=function(){if(!this.getDomRef()){return}var e=document.activeElement;this.$().toggleClass("sapUiTableEmpty",p.isNoDataVisible(this));this._getAccExtension().updateAriaStateForOverlayAndNoData();this._getKeyboardExtension().updateNoDataAndOverlayFocus(e)};E.prototype.removeColumn=function(e,t){e=this.removeAggregation("columns",e,t);if(e===null){return e}if(typeof e==="number"&&e>-1){e=this.getColumns()[e]}var i=this._aSortedColumns.indexOf(e);if(!this._bReorderInProcess&&i>=0){this._aSortedColumns.splice(i,1)}this.invalidateRowsAggregation();this._invalidateComputedFixedColumnCount();var o=this.getCreationRow();if(o){o._update()}return e};E.prototype.removeAllColumns=function(){var e=this.removeAllAggregation("columns");this._aSortedColumns=[];this.invalidateRowsAggregation();this._invalidateComputedFixedColumnCount();var t=this.getCreationRow();if(t){t._update()}return e};E.prototype.destroyColumns=function(){var e=this.destroyAggregation("columns");this._aSortedColumns=[];this.invalidateRowsAggregation();this._invalidateComputedFixedColumnCount();var t=this.getCreationRow();if(t){t._update()}return e};E.prototype.addColumn=function(e,t){this.addAggregation("columns",e,t);this.invalidateRowsAggregation();this._invalidateComputedFixedColumnCount();var i=this.getCreationRow();if(i){i._update()}return this};E.prototype.insertColumn=function(e,t,i){this.insertAggregation("columns",e,t,i);this.invalidateRowsAggregation();this._invalidateComputedFixedColumnCount();var o=this.getCreationRow();if(o){o._update()}return this};E.prototype._getTotalRowCount=function(){var e=this.getBinding("rows");var t=this.getBindingInfo("rows");if(!e){return 0}if(t.length!=null){return t.length}if(!this._bContextsAvailable){return D(this).iCachedBindingLength}D(this).iCachedBindingLength=e.getLength();return D(this).iCachedBindingLength};E.prototype._getMaxFirstVisibleRowIndex=function(){var e;if(p.isVariableRowHeightEnabled(this)){e=this._getTotalRowCount()-1}else{e=this._getTotalRowCount()-this._getRowCounts().count}return Math.max(0,e)};E.prototype._getMaxFirstRenderedRowIndex=function(){var e=this._getTotalRowCount()-this._getRowCounts().count;return Math.max(0,e)};E.prototype._getFirstRenderedRowIndex=function(){return D(this).iFirstRenderedRowIndex};E.prototype._getVisibleColumns=function(){var e=[];var t=this.getColumns();for(var i=0,o=t.length;i<o;i++){if(t[i].shouldRender()){e.push(t[i])}}return e};E.prototype._getColumnsWidth=function(e,t){var i=this.getColumns();var o=0;if(e!==0&&!e){e=0}if(t!==0&&!t){t=i.length}for(var n=e,r=t;n<r;n++){if(i[n]&&i[n].shouldRender()){var s=p.convertCSSSizeToPixel(i[n].getWidth());if(s==null){s=p.Column.getMinColumnWidth()}o+=s}}return o};E.prototype._onTableResize=function(e){var t=e.oldSize.width;var i=e.size.width;if(this._bInvalid||!this.getDomRef()||t===i){return}this._updateTableSizes(p.RowsUpdateReason.Resize)};E.prototype._onWindowResize=function(){if(this._bInvalid||!this.getDomRef()){return}if(e.browser.chrome&&window.devicePixelRatio!==this._nDevicePixelRatio){this._nDevicePixelRatio=window.devicePixelRatio;this._updateTableSizes(p.RowsUpdateReason.Zoom);this._adjustOutlineOffset()}};E.prototype._adjustOutlineOffset=function(){if(window.devicePixelRatio<1){this.addStyleClass("sapUiTableZoomout")}else{this.removeStyleClass("sapUiTableZoomout")}};E.prototype._disableTextSelection=function(e){S(e||document.body).attr("unselectable","on").css({"-moz-user-select":"none","-webkit-user-select":"none","user-select":"none"}).on("selectstart",function(e){e.preventDefault();return false})};E.prototype._enableTextSelection=function(e){S(e||document.body).attr("unselectable","off").css({"-moz-user-select":"","-webkit-user-select":"","user-select":""}).off("selectstart")};E.prototype._clearTextSelection=function(){if(window.getSelection){if(window.getSelection().empty){window.getSelection().empty()}else if(window.getSelection().removeAllRanges){window.getSelection().removeAllRanges()}}else if(document.selection&&document.selection.empty){try{document.selection.empty()}catch(e){}}};E.prototype._findAndfireCellEvent=function(e,t,i){var o=S(t.target);var n=o.closest(".sapUiTableDataCell");var r=n.attr("id");var s=/.*-row(\d*)-col(\d*)/i.exec(r);var a=false;if(s){var l=s[1];var d=s[2];var h=this.getRows()[l];var p=h&&h.getCells()[d];var g=h&&h.getIndex();var c=u.ofCell(p).getId();var f=h.getRowBindingContext();var y={rowIndex:g,columnIndex:d,columnId:c,cellControl:p,rowBindingContext:f,cellDomRef:n.get(0)};a=!e.call(this,y);if(!a&&typeof i==="function"){y.cellDomRef=n[0];a=i.call(this,y)}}return a};E.prototype.getFocusDomRef=function(){this._getKeyboardExtension().initItemNavigation();if(this.getShowOverlay()){return this.getDomRef("overlay")}if(p.isNoDataVisible(this)){return this.getDomRef("noDataCnt")}var e=p.getFocusedItemInfo(this);if(e&&e.domRef){return e.domRef}return t.prototype.getFocusDomRef.apply(this,arguments)};E.prototype.pushSortedColumn=function(e,t){if(!t){this._aSortedColumns=[]}if(this._aSortedColumns.indexOf(e)===-1){this._aSortedColumns.push(e)}};E.prototype.getSortedColumns=function(){return this._aSortedColumns.slice()};E.prototype.sort=function(e,t,i){if(!e){for(var o=0;o<this._aSortedColumns.length;o++){this._aSortedColumns[o].setSorted(false)}var n=this.getBinding("rows");if(n){n.sort()}this._aSortedColumns=[]}if(this.getColumns().indexOf(e)>=0){e.sort(t===B.Descending,i)}};E.prototype.filter=function(e,t){if(this.getColumns().indexOf(e)>=0){if(t==null){t=""}else if(typeof t!=="string"){throw new Error("The filter value is not a string")}e.filter(t)}};E.prototype._updateSelection=function(){var e=this.getSelectionMode();if(e===P.None){return}var t=this._getSelectionPlugin().getRenderConfig();var i;var o;var n=this.$("selall");var r=this.getRows();for(var s=0;s<r.length;s++){var a=r[s];a._updateSelection()}if(!t.headerSelector.visible){return}if(t.headerSelector.type==="toggle"){var l=p.areAllRowsSelected(this);n.toggleClass("sapUiTableSelAll",!l);this._getAccExtension().setSelectAllState(l);i=l?"TBL_DESELECT_ALL":"TBL_SELECT_ALL"}else if(t.headerSelector.type==="clear"){n.toggleClass("sapUiTableSelAllDisabled",!t.headerSelector.enabled);i="TBL_DESELECT_ALL";if(t.headerSelector.enabled){n.removeAttr("aria-disabled")}else{n.attr("aria-disabled","true")}}if(i){o=p.getResourceText(i);if(this._getShowStandardTooltips()){n.attr("title",o)}else if(t.headerSelector.type==="toggle"){this.getDomRef("ariaselectall").innerText=o}}};E.prototype._getShowStandardTooltips=function(){return!this._bHideStandardTooltips};E.prototype._onSelectionChanged=function(e){var t=this._getSelectionPlugin();var i=e.getParameter("rowIndices");var o=e.getParameter("selectAll");var n=this._iSourceRowIndex!==undefined?this._iSourceRowIndex:t.getSelectedIndex();this._updateSelection();if(!this._hasSelectionPlugin()){this.setProperty("selectedIndex",t.getSelectedIndex(),true);this.fireRowSelectionChange({rowIndex:n,rowContext:this.getContextByIndex(n),rowIndices:i,selectAll:o,userInteraction:this._iSourceRowIndex!==undefined})}};E.prototype.getContextByIndex=function(e){var t=this.getBinding("rows");return e>=0&&t?t.getContexts(e,1)[0]:null};E.prototype.getSelectedIndex=function(){if(this._hasSelectionPlugin()){throw new Error("Unsupported operation: sap.ui.table.Table#getSelectedIndex must not be called if a selection plugin is applied.")}return this._getSelectionPlugin().getSelectedIndex()};E.prototype.setSelectedIndex=function(e){if(this._hasSelectionPlugin()){throw new Error("Unsupported operation: sap.ui.table.Table#setSelectedIndex must not be called if a selection plugin is applied.")}this._getSelectionPlugin().setSelectedIndex(e);return this};E.prototype.clearSelection=function(){if(this._hasSelectionPlugin()){throw new Error("Unsupported operation: sap.ui.table.Table#clearSelection must not be called if a selection plugin is applied.")}this._getSelectionPlugin().clearSelection();return this};E.prototype.selectAll=function(){if(this._hasSelectionPlugin()){throw new Error("Unsupported operation: sap.ui.table.Table#selectAll must not be called if a selection plugin is applied.")}if(p.hasSelectAll(this)){this._getSelectionPlugin().selectAll()}return this};E.prototype.getSelectedIndices=function(){if(this._hasSelectionPlugin()){throw new Error("Unsupported operation: sap.ui.table.Table#getSelectedIndices must not be called if a selection plugin is applied.")}return this._getSelectionPlugin().getSelectedIndices()};E.prototype.addSelectionInterval=function(e,t){if(this._hasSelectionPlugin()){throw new Error("Unsupported operation: sap.ui.table.Table#addSelectionInterval must not be called if a selection plugin is applied.")}this._getSelectionPlugin().addSelectionInterval(e,t);return this};E.prototype.setSelectionInterval=function(e,t){if(this._hasSelectionPlugin()){throw new Error("Unsupported operation: sap.ui.table.Table#setSelectionInterval must not be called if a selection plugin is applied.")}this._getSelectionPlugin().setSelectionInterval(e,t);return this};E.prototype.removeSelectionInterval=function(e,t){if(this._hasSelectionPlugin()){throw new Error("Unsupported operation: sap.ui.table.Table#removeSelectionInterval must not be called if a selection plugin is applied.")}this._getSelectionPlugin().removeSelectionInterval(e,t);return this};E.prototype.isIndexSelected=function(e){if(this._hasSelectionPlugin()){throw new Error("Unsupported operation: sap.ui.table.Table#isIndexSelected must not be called if a selection plugin is applied.")}return this._getSelectionPlugin().isIndexSelected(e)};E.prototype.setGroupBy=function(e){var t=e;var i=sap.ui.getCore().byId(this.getGroupBy());if(typeof t==="string"){t=sap.ui.getCore().byId(t)}var o=false;if(t instanceof u&&t!==i){if(this.getColumns().indexOf(t)===-1){throw new Error("Column has to be part of the columns aggregation!")}var n=this.fireGroup({column:t,groupedColumns:[t.getId()],type:T.group});if(i){i.setGrouped(false);o=true}if(n&&this.getEnableGrouping()){t.setGrouped(true)}}if(!t||o){if(i){i.setGrouped(false)}p.Grouping.resetExperimentalGrouping(this)}return this.setAssociation("groupBy",t)};E.prototype.getBinding=function(e){p.Grouping.setupExperimentalGrouping(this);return i.prototype.getBinding.call(this,[e||"rows"])};E.prototype.setEnableGrouping=function(e){var t=sap.ui.getCore().byId(this.getGroupBy());this.setProperty("enableGrouping",e);if(t){t.setGrouped(e)}p.Grouping.resetExperimentalGrouping(this);this._invalidateColumnMenus();return this};E.prototype.setEnableCustomFilter=function(e){this.setProperty("enableCustomFilter",e);this._invalidateColumnMenus();return this};E.prototype.setEnableColumnFreeze=function(e){this.setProperty("enableColumnFreeze",e);this._invalidateColumnMenus();return this};E.prototype.setShowColumnVisibilityMenu=function(e){this.setProperty("showColumnVisibilityMenu",e);this._invalidateColumnMenus();return this};E.prototype.getComputedFixedColumnCount=function(){if(this._bIgnoreFixedColumnCount){return 0}return this._getSpanBasedComputedFixedColumnCount()};E.prototype._getSpanBasedComputedFixedColumnCount=function(){if(D(this).iComputedFixedColumnCount===null){var e=this.getColumns();var t;var i=this.getFixedColumnCount();for(var o=i-1;o>=0;o--){t=e[o];if(t){i=Math.max(i,t.getIndex()+p.Column.getHeaderSpan(t));break}}D(this).iComputedFixedColumnCount=Math.min(i,e.length)}return D(this).iComputedFixedColumnCount};E.prototype.setFixedColumnCount=function(e,t){this.setProperty("fixedColumnCount",e,t);this._invalidateComputedFixedColumnCount();var i=this.getColumns();var o;var n=this.$().find(".sapUiTableCtrlFirstCol > th");for(var r=this._getSpanBasedComputedFixedColumnCount()-1;r>=0;r--){o=i[r];if(o&&p.isVariableWidth(o.getWidth())){o._iFixWidth=n.filter("[data-sap-ui-headcolindex='"+o.getIndex()+"']").width()}}this._collectTableSizes();if(this.getEnableColumnFreeze()){this._invalidateColumnMenus()}return this};E.prototype.setFixedRowCount=function(e){if(!(parseInt(e)>=0)){x.error("Number of fixed rows must be greater or equal 0",this);return this}if(e+this.getFixedBottomRowCount()>=this.getVisibleRowCount()){x.error("Table '"+this.getId()+"' fixed rows('"+(e+this.getFixedBottomRowCount())+"') must be smaller than"+" numberOfVisibleRows('"+this.getVisibleRowCount()+"')",this);return this}if(this.getRowMode()){x.warning('If the "rowMode" aggregation is set, setting the "fixedRowCount" has no effect');return this.setProperty("fixedRowCount",e,true)}return this.setProperty("fixedRowCount",e)};E.prototype.setFixedBottomRowCount=function(e){if(!(parseInt(e)>=0)){x.error("Number of fixed bottom rows must be greater or equal 0",this);return this}if(e+this.getFixedRowCount()>=this.getVisibleRowCount()){x.error("Table '"+this.getId()+"' fixed rows('"+(e+this.getFixedRowCount())+"') must be smaller than"+" numberOfVisibleRows('"+this.getVisibleRowCount()+"')",this);return this}if(this.getRowMode()){x.warning('If the "rowMode" aggregation is set, setting the "iFixedBottomRowCount" has no effect');return this.setProperty("fixedBottomRowCount",e,true)}return this.setProperty("fixedBottomRowCount",e)};E.prototype.setThreshold=function(e){this.setProperty("threshold",e,true);return this};E.prototype._invalidateColumnMenus=function(){var e=this.getColumns();for(var t=0,i=e.length;t<i;t++){e[t].invalidateMenu()}};E.prototype._isTouchEvent=function(e){return!!(e&&e.originalEvent&&e.originalEvent.touches)};E.prototype._getRowClone=function(e){var t=typeof e==="number";var i=t;var o=i?this._aRowClones[e]:null;if(o&&!o.bIsDestroyed){return o}o=new d(this.getId()+"-rows"+"-row"+(t?e:"-"+e));if(i){this._aRowClones[e]=o}var n=this.getColumns();for(var r=0,s=n.length;r<s;r++){if(n[r].getVisible()){var a=n[r].getTemplateClone(r);if(a){o.addCell(a)}}}if(p.hasRowActions(this)){var l=this.getRowActionTemplate().clone();o.setAggregation("_rowAction",l,true)}var u=this.getRowSettingsTemplate();if(u){var h=u.clone();o.setAggregation("_settings",h,true)}return o};E.prototype.invalidateRowsAggregation=function(){this._bRowAggregationInvalid=true};E.prototype._invalidateComputedFixedColumnCount=function(){D(this).iComputedFixedColumnCount=null};E.prototype._getBaseRowHeight=function(){var e=this._getRowMode().getBaseRowContentHeight();if(e>0){return e+p.RowHorizontalFrameSize}else{return this._getDefaultRowHeight()}};E.prototype._getDefaultRowHeight=function(){var e=p.getContentDensity(this);return p.DefaultRowHeight[e]};E.prototype._getDefaultRowContentHeight=function(){var e=p.getContentDensity(this);return p.BaseSize[e]};E.prototype.setShowNoData=function(e){var t=true;if(this.getShowNoData()&&e===false&&this.getRows().length===0){t=false}this.setProperty("showNoData",e,t);this._updateNoData();return this};E.prototype.setNoData=function(e){var t=p.getNoDataText(this);this.setAggregation("noData",e,true);var i=p.getNoDataText(this);if(t!=null&&i!=null){if(t!==i){this.$("noDataMsg").text(i)}}else{this.invalidate()}return this};E.prototype.exportData=function(e){var t=sap.ui.requireSync("sap/ui/core/util/Export");e=e||{};if(!e.rows){var i=this.getBinding("rows"),o=this.getBindingInfo("rows");var n=i.aFilters.concat(i.aApplicationFilters);e.rows={path:o.path,model:o.model,sorter:i.aSorters,filters:n,parameters:o.parameters}}if(!e.exportType){var r=sap.ui.requireSync("sap/ui/core/util/ExportTypeCSV");e.exportType=new r}var s=e.rows.model;if(!s){var a=e.rows.path;var l=a.indexOf(">");if(l>0){s=a.substr(0,l)}}if(!e.columns){e.columns=[];var u=this.getColumns();for(var d=0,h=u.length;d<h;d++){var p=u[d];if(p.getSortProperty()){e.columns.push({name:p.getLabel().getText(),template:{content:{path:p.getSortProperty(),model:s}}})}}}var g=new t(e);this.addDependent(g);return g};E.prototype._onPersoApplied=function(){var e=this.getColumns();var t=[];for(var i=0,o=e.length;i<o;i++){var n=e[i];if(n.getSorted()){t.push(new a(n.getSortProperty(),n.getSortOrder()===B.Descending))}}var r=this.getBinding("rows");if(r){if(t.length>0){r.sort(t)}}};E.prototype._toggleSelectAll=function(){if(!p.hasData(this)||this.getSelectionMode()!==P.MultiToggle){return}var e=this._getSelectionPlugin();if(p.areAllRowsSelected(this)){this._iSourceRowIndex=-1;e.clearSelection()}else{this._iSourceRowIndex=0;e.selectAll()}this._iSourceRowIndex=undefined};E.prototype.setBusy=function(e,i){var o=this.getBusy()!=e;i="sapUiTableGridCnt";var n=t.prototype.setBusy.call(this,e,i);if(o){this.fireBusyStateChanged({busy:e})}return n};E.prototype.setEnableBusyIndicator=function(e){this.setProperty("enableBusyIndicator",e,true);if(!e){this.setBusy(false)}return this};E.prototype._onBindingDataRequested=function(e){if(e.getSource()!=this.getBinding("rows")||e.getParameter("__simulateAsyncAnalyticalBinding")){return}this._iPendingRequests++;this._bPendingRequest=true;var t=p.canUsePendingRequestsCounter(this);if(this.getEnableBusyIndicator()&&(t&&this._iPendingRequests===1||!t)){this.setBusy(true)}if(this._dataReceivedHandlerId!=null){clearTimeout(this._dataReceivedHandlerId);delete this._dataReceivedHandlerId}};E.prototype._onBindingDataReceived=function(e){if(e.getSource()!=this.getBinding("rows")||e.getParameter("__simulateAsyncAnalyticalBinding")){return}this._iPendingRequests--;this._bPendingRequest=false;this._adjustToTotalRowCount();if(!p.hasPendingRequests(this)){this._dataReceivedHandlerId=setTimeout(function(){if(this.getEnableBusyIndicator()){this.setBusy(false)}this._updateNoData();delete this._dataReceivedHandlerId}.bind(this),0)}};E.prototype._setLargeDataScrolling=function(e){this._bLargeDataScrolling=!!e};E.prototype.setRowActionTemplate=function(e){this.setAggregation("rowActionTemplate",e);this.invalidateRowsAggregation();return this};E.prototype.setRowActionCount=function(e){if(typeof e==="number"){e=Math.max(0,Math.min(e,2))}return this.setProperty("rowActionCount",e)};E.prototype.setRowSettingsTemplate=function(e){this.setAggregation("rowSettingsTemplate",e);this.invalidateRowsAggregation();return this};E.prototype.addPlugin=function(e){this.addAggregation("plugins",e);if(p.isA(e,"sap.ui.table.plugins.SelectionPlugin")){this._initSelectionPlugin()}return this};E.prototype.insertPlugin=function(e,t){this.insertAggregation("plugins",e,t);if(p.isA(e,"sap.ui.table.plugins.SelectionPlugin")){this._initSelectionPlugin()}return this};E.prototype.removePlugin=function(e){var t=this.removeAggregation("plugins",e);if(p.isA(t,"sap.ui.table.plugins.SelectionPlugin")){this._initSelectionPlugin()}return t};E.prototype.removeAllPlugins=function(){var e=this.removeAllAggregation("plugins");this._initSelectionPlugin();return e};E.prototype.destroyPlugins=function(){this.destroyAggregation("plugins");this._initSelectionPlugin();return this};E.prototype.getPlugin=function(e){if(typeof e!=="string"){return null}var t=this.getPlugins();for(var i=0;i<t.length;i++){if(t[i].isA(e)){return t[i]}}return null};E.prototype._getSelectionPlugin=function(){var e=this._oSelectionPlugin||this._oLegacySelectionPlugin;if(!e){this._initLegacySelectionPlugin();e=this._oLegacySelectionPlugin}if(typeof this._getSelectedIndicesCount==="function"&&e.getSelectedCount!==this._getSelectedIndicesCount){e.getSelectedCount=this._getSelectedIndicesCount;["isIndexSelected","setSelectedIndex","getSelectedIndex","getSelectedIndices","setSelectionInterval","addSelectionInterval","removeSelectionInterval","selectAll","clearSelection"].forEach(function(t){e[t]=this[t]}.bind(this))}return e};E.prototype._hasSelectionPlugin=function(){return this._oSelectionPlugin!=null};E.prototype._initSelectionPlugin=function(){var e=this.getPlugin("sap.ui.table.plugins.SelectionPlugin");if(e){this._destroyLegacySelectionPlugin();if(e!==this._oSelectionPlugin){N(this,this._oSelectionPlugin);q(this,e);this._oSelectionPlugin=e}}else{this._initLegacySelectionPlugin();N(this,this._oSelectionPlugin);delete this._oSelectionPlugin}};E.prototype._initLegacySelectionPlugin=function(){if(this._oLegacySelectionPlugin||this.getPlugin("sap.ui.table.plugins.SelectionPlugin")){return}this._oLegacySelectionPlugin=this._createLegacySelectionPlugin();this.addAggregation("_hiddenDependents",this._oLegacySelectionPlugin);q(this,this._oLegacySelectionPlugin)};E.prototype._destroyLegacySelectionPlugin=function(){if(this._oLegacySelectionPlugin){this._oLegacySelectionPlugin.destroy();delete this._oLegacySelectionPlugin}};E.prototype._createLegacySelectionPlugin=function(){return new _};function q(e,t){if(t&&t.getMetadata().hasEvent("selectionChange")){t.attachSelectionChange(e._onSelectionChanged,e)}}function N(e,t){if(t&&t.getMetadata().hasEvent("selectionChange")){t.detachSelectionChange(e._onSelectionChanged,e)}}E.prototype.insertAggregation=function(e,i,o,n){if(e==="_hiddenDependents"){return t.prototype.insertAggregation.call(this,e,i,o,true)}return t.prototype.insertAggregation.apply(this,arguments)};E.prototype.addAggregation=function(e,i,o){if(e==="_hiddenDependents"){return t.prototype.addAggregation.call(this,e,i,true)}return t.prototype.addAggregation.apply(this,arguments)};E.prototype.removeAggregation=function(e,i,o){if(e==="_hiddenDependents"){return t.prototype.removeAggregation.call(this,e,i,true)}return t.prototype.removeAggregation.apply(this,arguments)};E.prototype.removeAllAggregation=function(e,i){if(e==="_hiddenDependents"){return t.prototype.removeAllAggregation.call(this,e,true)}return t.prototype.removeAllAggregation.apply(this,arguments)};E.prototype.destroyAggregation=function(e,i){if(e==="_hiddenDependents"){return t.prototype.destroyAggregation.call(this,e,true)}t.prototype.destroyAggregation.apply(this,arguments);if(e==="rows"){this._aRowClones.forEach(function(e){e.destroy()});this._aRowClones=[]}return this};E.prototype.getCellControl=function(e,t,i){var o=p.getRowColCell(this,e,t,!i);return o.cell};E.prototype._fireRowsUpdated=function(e){var t={reason:e||p.RowsUpdateReason.Unknown};this.onRowsUpdated(t);clearTimeout(this._mTimeouts.fireRowsUpdated);this._mTimeouts.fireRowsUpdated=setTimeout(function(){this.onRowsContentUpdated(t);this.fireEvent("_rowsUpdated",t)}.bind(this),0)};E.prototype.onRowsUpdated=function(e){p.Grouping.updateGroups(this);this._getAccExtension()._updateAriaRowIndices();this._updateSelection()};E.prototype.onRowsContentUpdated=function(e){if(this.getRows().length>0){this._resetRowHeights();this._aRowHeights=this._collectRowHeights(false);this._updateRowHeights(this._aRowHeights,false);this._getAccExtension().updateAccForCurrentCell(e.reason)}};E.prototype._enableSynchronization=function(){var e=this;return new Promise(function(t,i){sap.ui.require(["sap/ui/table/extensions/Synchronization"],function(i){t(g.enrich(e,i).getInterface())},function(e){i(e)})})};E.prototype._enableLegacyMultiSelection=function(){if(this._hasSelectionPlugin()){throw new Error("Unsupported operation: sap.ui.table.Table#_enableLegacyMultiSelection must not be called"+" if a selection plugin is applied.")}this._legacyMultiSelection=function(e,t){if(this._hasSelectionPlugin()){throw new Error("Unsupported operation: The legacy multi selection is not supported if a selection plugin is applied")}var i=!!(t.metaKey||t.ctrlKey);if(!this.isIndexSelected(e)){if(i){this.addSelectionInterval(e,e)}else{this.setSelectedIndex(e)}}else if(i||this._getSelectionPlugin().getSelectedCount()===1){this.removeSelectionInterval(e,e)}else{this.setSelectedIndex(e)}}.bind(this)};return E});